#!/bin/bash

# update system

# UBUNTU
# sudo apt update
# sudo apt upgrade -dy
# sudo apt dist-upgrade -dy

# ARCHLINUX
sudo pacman -Suy --downloadonly --noconfirm
# yaourt -Su --aur

# update pyenv
cd ~/.pyenv ; git pull ; cd -
cd ~/.pyenv/plugins/pyenv-virtualenv ; git pull ; cd -

# update fades
cd ~/.fades ; git pull ; cd -

# update emacs configuration
cd ~/.emacs.d ; ./bin/update_git_submodules ; cd -

# backup personal trac
backup_trac

# backup pacman database
yaourt -B /home/humitos/.pacman

# update mozio repositories and environments
mozio_update_repositories
mozio_update_venv_elpy

mozio_docker_pull

# update raspberrypi packages
# added `--ignore wpa_supplicant --ignore openssl` because of a bug in
# openssl that makes the installation to fail
# sudo pacman -S --force wpa_supplicant
# sudo pacman -S --force openssl
ssh alarm@192.168.10.1 sudo pacman -Suy --noconfirm  # --ignore wpa_supplicant --ignore openssl

# clean pacman old packages
ssh alarm@192.168.10.1 sudo pacman -Sc --noconfirm
